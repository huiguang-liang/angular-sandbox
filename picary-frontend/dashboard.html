<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Bootstrap viewport declaration -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- favicon -->
  <link rel='shortcut icon' type='image/x-icon' href='resources/favicon.ico' />

  <!-- Title -->
  <title>PICARY</title>

  <!-- Import scripts -->
  <link href="http://fonts.googleapis.com/css?family=Roboto:300,400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Cormorant:500i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Oswald:400" rel="stylesheet">
  <!-- Google Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Styling options -->
  <link rel="stylesheet" type="text/css" href="resources/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="resources/theme.css">
</head>

<body>

  <!-- Top Navbar -->
  <nav class="navbar navbar-top navbar-default">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed navbar-text" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><img src="resources/picary.svg" class="img-responsive center-block navbar-logo" alt="Responsive image"></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Dashboard <span class="sr-only">(current)</span></a></li>
          <li><a href="#">Admin</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#">Logout<span class="glyphicon glyphicon-log-out icon-left-padding" aria-hidden="true"></span></a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>

  <!-- Sidebar & Content -->
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-xs-4 col-sm-3 col-md-2">
        <div class="well sidebar">
          <ul class="nav nav-sidebar">
            <li class="sidebar-hello text-center">Hi, Jason!</li>
            <li class="sidebar-label">Case Management</li><hr>
            <li class="active"><a href="#">All Cases <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Create New Case</a></li>
            <li class="sidebar-label">External Liasion</li><hr>
            <li><a href="#">All Liasion</a></li>
            <li><a href="#">Create New Liasion</a></li>
            <li class="sidebar-label">Report Generation</li><hr>
            <li><a href="#">Generate Reports</a></li>
          </ul>
        </div>
      </div>
      <!-- Content -->
      <div class="col-xs-8 col-sm-9 col-md-10">

        <!-- Demo D3 chart -->
        <div class="container container-mainbody">
          <div class="row">
            <div class="col-md-6 col-lg-6">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Number of Interventions</h3>
                </div>
                <div class="panel-body">
                  <div id="chartContainer" class="center-block" style="width: 500px;"></div>
                </div>
              </div>
            </div>
            <div class="col-md-6 col-lg-6">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Summary of Case Progressions</h3>
                </div>
                <div class="panel-body">
                  <div id="chartContainer2" class="center-block" style="width: 500px;"></div>
                </div>
              </div>
            </div>
          </div>
        <!-- </div>

        <div class="container container-mainbody"> -->
          <div class="row">
            <div class="col-md-12 col-lg-12">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h3 class="panel-title">Case Number by Categories</h3>
                </div>
                <div class="panel-body">
                  <div id="chartContainer3" class="center-block" style="width: 1000px;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="container container-mainbody">
          <div class="page-header mainbody-header">
            <h2>Upcoming Reminders</h2>
          </div>
          <table class="table table-striped table-hover table-bordered table-condensed">
            <thead>
              <th>Case Ref.</th>
              <th>Reminder Date</th>
              <th>Note</th>
              <th>Date Scheduled</th>
            </thead>
            <tbody>
              <tr>
                <td>NE41276</td>
                <td>09 Mar '17</td>
                <td>Call SSO and arrange for financial aid.</td>
                <td>02 Feb '17</td>
              </tr>
              <tr>
                <td>NE41321</td>
                <td>03 Mar '17</td>
                <td>Submit enrollment documents for YEAH! Programme.</td>
                <td>21 Jan '17</td>
              </tr>
              <tr>
                <td>NE41125</td>
                <td>29 Feb '17</td>
                <td>Arrange with <mark>Jason Teo</mark> for follow-up counselling session</td>
                <td>09 Jan '17</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="container container-mainbody">
          <div class="page-header mainbody-header">
            <h2>Your New Notes <span class="badge">4</span></h2>
          </div>
          <table class="table table-striped table-hover table-bordered table-condensed">
            <thead>
              <th>Case Ref.</th>
              <th>From</th>
              <th>Message</th>
              <th>Date Created</th>
            </thead>
            <tbody>
              <tr>
                <td>NE41318</td>
                <td><mark>Franco Lim</mark></td>
                <td>We need to arrange for counselling session.</td>
                <td>02 Feb '17</td>
              </tr>
              <tr>
                <td>NE41561</td>
                <td><mark>Huiying Tan</mark></td>
                <td>Please arrange a meeting with child's father for an interview.</td>
                <td>05 Feb '17</td>
              </tr>
              <tr>
                <td>NE41037</td>
                <td><mark>Mary Low</mark></td>
                <td>We need to monitor child more closely, showing signs of rebelliousness.</td>
                <td>11 Feb '17</td>
              </tr>
              <tr>
                <td>NE41662</td>
                <td><mark>Chris Wong</mark></td>
                <td>Child has been absent from school recently, need to make home visit.</td>
                <td>16 Feb '17</td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>

  <!-- Footer -->
  <hr class="hr-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-12 col-lg-12">
        <p class="text-center">
          <small>
            All rights reserved by <a href="http://www.trampolene.org">Trampolene Ltd.</a>, A*StartCentral @ Block 79, Unit #05-03, 79 Ayer Rajah Crescent, Singapore 139955
          </small></p>
      </div>
    </div>
  </div>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="resources/bootstrap/js/bootstrap.min.js"></script>
  <!-- Include d3 -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.3.0.min.js"></script>

  <!-- Chart type 1 -->
  <script type="text/javascript">
    var svg = dimple.newSvg("#chartContainer", 500, 400);

    // The default data set for these examples has regular times
    // and the point of this demo is to show the time axis
    // functionality, therefore a small bespoke data set is used.
    data = [
      { "Shift":"Early","Date":"12 Jul 2010 10:00","Value":1000 },
      { "Shift":"Early","Date":"20 Jul 2010 10:20","Value":1200 },
      { "Shift":"Early","Date":"1 Aug 2010 10:40","Value":1600 },
      { "Shift":"Early","Date":"8 Aug 2010 10:10","Value":1300 },
      { "Shift":"Early","Date":"20 Aug 2010 11:00","Value":1900 },
      { "Shift":"Early","Date":"7 Sep 2010 09:50","Value":1100 },
      { "Shift":"Early","Date":"13 Sep 2010 10:10","Value":1000 },
      { "Shift":"Early","Date":"1 Oct 2010 12:00","Value":2000 },
      { "Shift":"Early","Date":"6 Oct 2010 10:10","Value":1900 },
      { "Shift":"Early","Date":"19 Oct 2010 11:40","Value":1800 },
      { "Shift":"Early","Date":"24 Oct 2010 10:30","Value":1200 },
      { "Shift":"Early","Date":"3 Nov 2010 09:30","Value":1800 },
      { "Shift":"Early","Date":"12 Nov 2010 10:50","Value":1800 },
      { "Shift":"Early","Date":"20 Nov 2010 10:10","Value":1900 },
      { "Shift":"Early","Date":"5 Dec 2010 10:50","Value":1600 },
      { "Shift":"Early","Date":"9 Dec 2010 12:20","Value":1700 },
      { "Shift":"Early","Date":"15 Dec 2010 10:10","Value":1400 },
      { "Shift":"Early","Date":"20 Dec 2010 10:00","Value":1200 },
      { "Shift":"Late","Date":"11 Jul 2010 16:00","Value":2400 },
      { "Shift":"Late","Date":"30 Jul 2010 17:30","Value":2000 },
      { "Shift":"Late","Date":"1 Aug 2010 15:40","Value":1600 },
      { "Shift":"Late","Date":"5 Aug 2010 13:10","Value":1700 },
      { "Shift":"Late","Date":"1 Sep 2010 15:00","Value":1900 },
      { "Shift":"Late","Date":"7 Sep 2010 15:50","Value":1100 },
      { "Shift":"Late","Date":"13 Sep 2010 14:10","Value":1500 },
      { "Shift":"Late","Date":"30 Sep 2010 13:00","Value":1000 },
      { "Shift":"Late","Date":"1 Nov 2010 15:50","Value":1800 },
      { "Shift":"Late","Date":"24 Nov 2010 15:10","Value":1900 },
      { "Shift":"Late","Date":"1 Dec 2010 15:50","Value":1600 },
      { "Shift":"Late","Date":"5 Dec 2010 15:20","Value":1700 },
      { "Shift":"Late","Date":"13 Dec 2010 15:10","Value":1400 },
      { "Shift":"Late","Date":"25 Dec 2010 15:00","Value":1200 }
    ];

    // Create Separate Date and Time, this allows us to draw them
    // on separate axes.  Despite the time axis only displaying
    // the time portion, the whole date is used so they need to
    // have the same date allocated
    data.forEach(function (d) {
        d["Day"] = d["Date"].substring(0, d["Date"].length - 6);
        d["Time of Day"] =
            "2000-01-01 " + d["Date"].substring(d["Date"].length - 5);
    }, this);

    // Create the chart as usual
    var myChart = new dimple.chart(svg, data);
    myChart.setBounds(70, 40, 400, 320)

    // Add the x axis reading dates in the format 01 Jan 2012
    // and displaying them 01 Jan
    var x = myChart.addTimeAxis("x", "Day", "%d %b %Y", "%d %b");

    // Add the y axis reading dates and times but only outputting
    // times.
    var y = myChart.addTimeAxis("y", "Time of Day",
        "%Y-%m-%d %H:%M", "%H:%M");

    // Size the bubbles by volume
    var z = myChart.addMeasureAxis("z", "Value");

    // Setting min and max dates requires them to be set
    // as actual javascript date objects
    x.overrideMin = new Date("2010-06-20");
    x.overrideMax = new Date("2011-01-02");
    y.overrideMin = new Date("01/01/2000 9:00 am");
    y.overrideMax = new Date("01/01/2000 6:00 pm");

    // Show a label for every 4 weeks.
    x.timePeriod = d3.timeWeek;
    x.timeInterval = 4;

    // Control bubble sizes by setting the max and min values
    z.overrideMin = 900;
    z.overrideMax = 3000;

    // Add the bubble series for shift values first so that it is
    // drawn behind the lines
    myChart.addSeries("Shift", dimple.plot.bubble);

    // Add the line series on top of the bubbles.  The bubbles
    // and line points will naturally fall in the same places
    var s = myChart.addSeries("Shift", dimple.plot.line);

    // Add line markers to the line because it looks nice
    s.lineMarkers = true;

    // Show a legend
    myChart.addLegend(180, 10, 300, 20, "right");

    // Draw everything
    myChart.draw();
  </script>

  <!-- Chart type 2 -->
  <script type="text/javascript">
    var svg2 = dimple.newSvg("#chartContainer2", 500, 400);
    d3.tsv("resources/example_data.tsv", function (data) {
      var myChart = new dimple.chart(svg2, data);
      myChart.setBounds(70, 40, 400, 320)
      myChart.addCategoryAxis("x", ["Risk Level", "Channel"]);
      myChart.addMeasureAxis("y", "Cases");
      myChart.addMeasureAxis("p", "Cases");
      var rings = myChart.addSeries("Pack Size", dimple.plot.pie);
      rings.innerRadius = 20;
      rings.outerRadius = 30;
      myChart.addLegend(180, 10, 300, 20, "right");
      myChart.draw();
    });
  </script>

  <!-- Chart type 3 -->
  <script type="text/javascript">
    var svg3 = dimple.newSvg("#chartContainer3", 1000, 400);

    d3.tsv("resources/example_data.tsv", function (data) {

      // Add a bullet chart to the svg
      function addBullet(x, y, height, width, measure, lowMark, highMark, compareField, keyVal, compareVal, color) {

        // This is a custom algorithm to lighten the passed color, I find I can't get the results I want from the d3.rgb.brighter method.
        function lighten(color, pct) {
          return d3.rgb(
            d3.rgb(color).r + pct * (255 - d3.rgb(color).r),
            d3.rgb(color).g + pct * (255 - d3.rgb(color).g),
            d3.rgb(color).b + pct * (255 - d3.rgb(color).b)
          );
        }

        // Create a single data row for bullet data.  Dimple doesn't quite handle bullets out of the box so we need to do some data manipulation here
        var bData = [{
          "Metric":measure,
          "Value":0,
          "Low Value":lowMark,
          "High Value":highMark,
          "Compare Value":0
        }];

        // Add the key and compare values for coloring and pop-ups
        bData[0][keyVal] = keyVal;
        bData[0][compareVal] = compareVal;

        // Iterate the data and put numbers into the low key or compare
        // value fields or exclude if in neither value
        data.forEach(function (d) {
          if (d[compareField] === keyVal) {
            bData[0]["Value"] += parseFloat(d[measure]);
          } else if (d[compareField] === compareVal) {
            bData[0]["Compare Value"] += parseFloat(d[measure]);
          }
        }, this);

        // Create the bullet chart itself at the passed bounds
        var bullet = new dimple.chart(svg3, bData);
        bullet.setBounds(x, y, height, width);

        // Add the x and y for the main bar
        var bY = bullet.addCategoryAxis("y", "Metric");
        var bX = bullet.addMeasureAxis("x", "Value");

        // Add a separate x axis for each measure, this is required
        // where we want to do a series for each measure.  By passing
        // another axis in place of the position we combine them to create
        // a 4 measure composite.
        var lX = bullet.addMeasureAxis(bX, "Low Value");
        var hX = bullet.addMeasureAxis(bX, "High Value");
        var cX = bullet.addMeasureAxis(bX, "Compare Value");

        // Add a series for the marks first (the order defines)
        // document z position - first at back, last on top
        // NB. High/Low Mark here doesn't refer to a field in the data
        // rather it tags the total value with a name we can use to color
        var hm = bullet.addSeries("High Mark", dimple.plot.bar, [bY, hX]);
        var lm = bullet.addSeries("Low Mark", dimple.plot.bar, [bY, lX]);
        // Add the main series - keyVal is for color and tooltip
        var b = bullet.addSeries(keyVal, dimple.plot.bar, [bY, bX]);
        // Add the comparison series - compareVal is for color and tooltip
        var m = bullet.addSeries(compareVal, dimple.plot.bar, [bY, cX]);

        // Configure the markers as floating bars
        m.stacked = false;
        cX.floatingBarWidth = 2;

        // Set the gaps for the bar series with a narrow main series and full
        // width for the markers
        hm.barGap = 0;
        lm.barGap = 0;
        b.barGap = 0.75;

        // Assign the colors as different shades of the passed color
        bullet.assignColor(keyVal, color);
        bullet.assignColor(compareVal, d3.rgb(color).darker(0.5));
        bullet.assignColor("Low Mark", lighten(color, 0.4));
        bullet.assignColor("High Mark", lighten(color, 0.6));

        // Draw the chart
        bullet.draw();

        // Once drawn we can remove titles
        bX.titleShape.remove();
        bY.titleShape.remove();

      }

      // Draw the chart for each financial metric in the data to compare
      // Black Mesa with rival brand owner Aperture. We are coloring most
      // measures blue, but the costs are red as they should be interperated
      // as "less is better".  Typically the high and low marks would be target
      // KPI bounds, the values are just hard coded for this example. A smarter
      // means to determine axis bounds would be better but I don't want to
      // bloat this example.
      addBullet(100, 30, 800, 30, "Unit Sales", 2300000, 2800000,
        "Owner", "Aperture", "Black Mesa", "#80B1D3");
      addBullet(100, 90, 800, 30, "Sales Value", 135000000, 145000000,
        "Owner", "Aperture", "Black Mesa", "#80B1D3");
      addBullet(100, 150, 800, 30, "Cost of Sales", 200000, 300000,
        "Owner", "Aperture", "Black Mesa", "#FB8072");
      addBullet(100, 210, 800, 30, "Gross Profit", 140000000, 170000000,
        "Owner", "Aperture", "Black Mesa", "#80B1D3");
      addBullet(100, 270, 800, 30, "Indirect Costs", 100000000, 150000000,
        "Owner", "Aperture", "Black Mesa", "#FB8072");
      addBullet(100, 330, 800, 30, "Operating Profit", 12000000, 16000000,
        "Owner", "Aperture", "Black Mesa", "#80B1D3");

    });
  </script>
</body>
